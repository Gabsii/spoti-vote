import React, {Component} from 'react';
import FontAwesomeIcon from '@fortawesome/react-fontawesome';
import {faRandom} from '@fortawesome/fontawesome-free-solid';
import {css} from 'glamor';

let constants = require('../../../js/constants');
const styles = {
    button: css({
        border: 0,
        color: constants.colors.fontSecondary,
        background: 'none',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'space-between',
        flexDirection: 'column',
        '@media(min-width: 760px)': {
            flexDirection: 'row'
        }
    }),
    count: css({
        marginLeft: 0,

        '@media(min-width: 760px)': {
            marginLeft: '1em'
        }
    })
};

class SkipButton extends Component {

    constructor() {
        super();
        this.state = {
            hover: false
        };
    }

    toggleHover() {
        this.setState({
            hover: !this.state.hover
        });
    }

    render() {
        let linkStyle;
        this.state.hover
            ? linkStyle = {
                cursor: 'pointer'
            }
            : linkStyle = {
                cursor: 'context-menu'
            };

        let users = this.props.connectedUser.length + 1;
        let skips = 0;
        for (let j = 0; j < this.props.connectedUser.length; j++) {
            if (this.props.connectedUser[j].voted === 'skip') {
                skips++;
            }
        }
        if (this.props.host.voted === 'skip') {
            skips++;
        }

        return (<button className={`${styles.button}`} style={linkStyle} onClick={this.props.skipHandler} onMouseEnter={this.toggleHover.bind(this)} onMouseLeave={this.toggleHover.bind(this)}>
            <FontAwesomeIcon icon={faRandom} size='2x'/>
            <div className={`${styles.count}`}>{skips + '/' + users}</div>
        </button>);
    }
}

export default SkipButton;
